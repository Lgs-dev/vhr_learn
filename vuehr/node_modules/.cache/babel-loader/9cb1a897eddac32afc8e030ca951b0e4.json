{"remainingRequest":"D:\\百度网盘\\Spring Boot+Vue全栈开发实战\\test_code\\chapter16\\vuehr\\node_modules\\babel-loader\\lib\\index.js!D:\\百度网盘\\Spring Boot+Vue全栈开发实战\\test_code\\chapter16\\vuehr\\src\\utils\\menus.js","dependencies":[{"path":"D:\\百度网盘\\Spring Boot+Vue全栈开发实战\\test_code\\chapter16\\vuehr\\src\\utils\\menus.js","mtime":1617009794084},{"path":"D:\\百度网盘\\Spring Boot+Vue全栈开发实战\\test_code\\chapter16\\vuehr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616998980398},{"path":"D:\\百度网盘\\Spring Boot+Vue全栈开发实战\\test_code\\chapter16\\vuehr\\node_modules\\babel-loader\\lib\\index.js","mtime":1616999009406}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nimport { getRequest } from \"./api\";\nexport var initMenu = function initMenu(router, store) {\n  console.log('initMenu');\n\n  if (store.state.routes.length > 0) {\n    return;\n  }\n\n  getRequest(\"/system/config/menu\").then(function (data) {\n    if (data) {\n      var fmtRoutes = formatRoutes(data);\n      router.addRoutes(fmtRoutes);\n      store.commit('initRoutes', fmtRoutes);\n      store.dispatch('connect');\n    }\n  });\n};\nexport var formatRoutes = function formatRoutes(routes) {\n  var fmRoutes = [];\n  routes.forEach(function (router) {\n    var path = router.path,\n        _component = router.component,\n        name = router.name,\n        meta = router.meta,\n        iconCls = router.iconCls,\n        children = router.children;\n\n    if (children && children instanceof Array) {\n      children = formatRoutes(children);\n    }\n\n    var fmRouter = {\n      path: path,\n      name: name,\n      iconCls: iconCls,\n      meta: meta,\n      children: children,\n      component: function component(resolve) {\n        if (_component.startsWith(\"Home\")) {\n          require(['../views/' + _component + '.vue'], resolve);\n        } else if (_component.startsWith(\"Emp\")) {\n          require(['../views/emp/' + _component + '.vue'], resolve);\n        } //else if (component.startsWith(\"Per\")) {\n        //                 require(['../views/per/' + component + '.vue'], resolve);\n        //             } else if (component.startsWith(\"Sal\")) {\n        //                 require(['../views/sal/' + component + '.vue'], resolve);\n        //             } else if (component.startsWith(\"Sta\")) {\n        //                 require(['../views/sta/' + component + '.vue'], resolve);\n        //             } else if (component.startsWith(\"Sys\")) {\n        //                 require(['../views/sys/' + component + '.vue'], resolve);\n        //             }\n\n      }\n    };\n    console.log(fmRouter);\n    fmRoutes.push(fmRouter);\n  });\n  return fmRoutes;\n};",{"version":3,"sources":["D:\\百度网盘\\Spring Boot+Vue全栈开发实战\\test_code\\chapter16\\vuehr\\src\\utils\\menus.js"],"names":["getRequest","initMenu","router","store","console","log","state","routes","length","then","data","fmtRoutes","formatRoutes","addRoutes","commit","dispatch","fmRoutes","forEach","path","component","name","meta","iconCls","children","Array","fmRouter","resolve","startsWith","require","push"],"mappings":";;;;AAAA,SAAQA,UAAR;AAEA,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,MAAD,EAASC,KAAT,EAAmB;AAC1CC,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;;AACG,MAAIF,KAAK,CAACG,KAAN,CAAYC,MAAZ,CAAmBC,MAAnB,GAA4B,CAAhC,EAAmC;AAC/B;AACH;;AACDR,EAAAA,UAAU,CAAC,qBAAD,CAAV,CAAkCS,IAAlC,CAAuC,UAAAC,IAAI,EAAI;AAC3C,QAAIA,IAAJ,EAAU;AACN,UAAIC,SAAS,GAAGC,YAAY,CAACF,IAAD,CAA5B;AACAR,MAAAA,MAAM,CAACW,SAAP,CAAiBF,SAAjB;AACAR,MAAAA,KAAK,CAACW,MAAN,CAAa,YAAb,EAA2BH,SAA3B;AACAR,MAAAA,KAAK,CAACY,QAAN,CAAe,SAAf;AACH;AACJ,GAPD;AAQH,CAbM;AAcP,OAAO,IAAMH,YAAY,GAAG,SAAfA,YAAe,CAACL,MAAD,EAAY;AACpC,MAAIS,QAAQ,GAAG,EAAf;AACAT,EAAAA,MAAM,CAACU,OAAP,CAAe,UAAAf,MAAM,EAAI;AAAA,QAEjBgB,IAFiB,GAQjBhB,MARiB,CAEjBgB,IAFiB;AAAA,QAGjBC,UAHiB,GAQjBjB,MARiB,CAGjBiB,SAHiB;AAAA,QAIjBC,IAJiB,GAQjBlB,MARiB,CAIjBkB,IAJiB;AAAA,QAKjBC,IALiB,GAQjBnB,MARiB,CAKjBmB,IALiB;AAAA,QAMjBC,OANiB,GAQjBpB,MARiB,CAMjBoB,OANiB;AAAA,QAOjBC,QAPiB,GAQjBrB,MARiB,CAOjBqB,QAPiB;;AASrB,QAAIA,QAAQ,IAAIA,QAAQ,YAAYC,KAApC,EAA2C;AACvCD,MAAAA,QAAQ,GAAGX,YAAY,CAACW,QAAD,CAAvB;AACH;;AACD,QAAIE,QAAQ,GAAG;AACXP,MAAAA,IAAI,EAAEA,IADK;AAEXE,MAAAA,IAAI,EAAEA,IAFK;AAGXE,MAAAA,OAAO,EAAEA,OAHE;AAIXD,MAAAA,IAAI,EAAEA,IAJK;AAKXE,MAAAA,QAAQ,EAAEA,QALC;AAMXJ,MAAAA,SANW,qBAMDO,OANC,EAMQ;AACf,YAAIP,UAAS,CAACQ,UAAV,CAAqB,MAArB,CAAJ,EAAkC;AAC9BC,UAAAA,OAAO,CAAC,CAAC,cAAcT,UAAd,GAA0B,MAA3B,CAAD,EAAqCO,OAArC,CAAP;AACH,SAFD,MAGP,IAAIP,UAAS,CAACQ,UAAV,CAAqB,KAArB,CAAJ,EAAiC;AACtBC,UAAAA,OAAO,CAAC,CAAC,kBAAkBT,UAAlB,GAA8B,MAA/B,CAAD,EAAyCO,OAAzC,CAAP;AACH,SANc,CAO3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACS;AAtBU,KAAf;AAwBNtB,IAAAA,OAAO,CAACC,GAAR,CAAYoB,QAAZ;AACMT,IAAAA,QAAQ,CAACa,IAAT,CAAcJ,QAAd;AACH,GAtCD;AAuCA,SAAOT,QAAP;AACH,CA1CM","sourcesContent":["import {getRequest} from \"./api\";\r\n\r\nexport const initMenu = (router, store) => {\r\n\tconsole.log('initMenu')\r\n    if (store.state.routes.length > 0) {\r\n        return;\r\n    }\r\n    getRequest(\"/system/config/menu\").then(data => {\r\n        if (data) {\r\n            let fmtRoutes = formatRoutes(data);\r\n            router.addRoutes(fmtRoutes);\r\n            store.commit('initRoutes', fmtRoutes);\r\n            store.dispatch('connect');\r\n        }\r\n    })\r\n}\r\nexport const formatRoutes = (routes) => {\r\n    let fmRoutes = [];\r\n    routes.forEach(router => {\r\n        let {\r\n            path,\r\n            component,\r\n            name,\r\n            meta,\r\n            iconCls,\r\n            children\r\n        } = router;\r\n        if (children && children instanceof Array) {\r\n            children = formatRoutes(children);\r\n        }\r\n        let fmRouter = {\r\n            path: path,\r\n            name: name,\r\n            iconCls: iconCls,\r\n            meta: meta,\r\n            children: children,\r\n            component(resolve) {\r\n                if (component.startsWith(\"Home\")) {\r\n                    require(['../views/' + component + '.vue'], resolve);\r\n                }\r\n\t\t\t\telse if (component.startsWith(\"Emp\")) {\r\n                    require(['../views/emp/' + component + '.vue'], resolve);\r\n                } \r\n\t\t\t\t//else if (component.startsWith(\"Per\")) {\r\n    //                 require(['../views/per/' + component + '.vue'], resolve);\r\n    //             } else if (component.startsWith(\"Sal\")) {\r\n    //                 require(['../views/sal/' + component + '.vue'], resolve);\r\n    //             } else if (component.startsWith(\"Sta\")) {\r\n    //                 require(['../views/sta/' + component + '.vue'], resolve);\r\n    //             } else if (component.startsWith(\"Sys\")) {\r\n    //                 require(['../views/sys/' + component + '.vue'], resolve);\r\n    //             }\r\n            }\r\n        }\r\n\t\tconsole.log(fmRouter);\r\n        fmRoutes.push(fmRouter);\r\n    })\r\n    return fmRoutes;\r\n}"]}]}